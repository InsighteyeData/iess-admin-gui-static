"use strict";(globalThis["webpackChunkiess_admin_gui"]=globalThis["webpackChunkiess_admin_gui"]||[]).push([[426],{4426:(e,o,l)=>{l.r(o),l.d(o,{default:()=>N});var i=l(1758),t=l(8734),s=l(2009),n=l(2449),a=l(9731),r=l(1658),m=l(2521),c=l(5949),d=l(2099),u=l(897);const f={class:"col-12 col-sm-11"},p={class:"row justify-between items-center"},b=(0,i.Lk)("div",{class:"text-h3"},"客戶資料",-1),g={class:"row"},h={class:"row q-mb-md justify-end items-center"},w={class:"row"},S={key:1,class:"custom-no-data row justify-center items-center"},C={class:"row justify-center"},v=(0,i.Lk)("div",{class:"col-12 text-h4 text-center text-neutral-grey_02"},"請先選擇公司、品牌",-1),k={__name:"sites",setup(e){const o=(0,t.Kh)({sitesCorpOptions:[],selectedSitesCorp:null,sitesBrandOptions:[],selectedSitesBrand:null,haveBrand:!1,isShowTable:!1,searchValue:"",isShowFormDialog:!1,formDialogTitle:"",formValues:{},isShowConfirmDialog:!1,confirmDialogInfo:{},importFile:null,formList:[],columns:[{name:"actions",align:"center",label:"操作"}],rows:[]});(0,i.sV)((()=>{o.sitesCorpOptions=c.Z9.map((e=>({label:e.corpName,value:e.id}))),o.formList=JSON.parse(JSON.stringify(d.lI)),o.columns=[...o.columns,...u.mv],o.formList=o.formList.map((e=>("identityCode"===e.field&&(e.options=c.pN.filter((e=>"前台"===e.system))),"monthLimit"===e.field&&(e.options=JSON.parse(JSON.stringify(c.IF))),e)))}));const l=e=>{"sitesCorp"===e&&(o.isShowTable=!1,o.haveBrand=c.Z9.find((e=>e.id===o.selectedSitesCorp)).haveBrand,o.haveBrand?o.sitesBrandOptions=c.gd.filter((e=>e.corp===o.selectedSitesCorp)).map((e=>({label:e.bname,value:e.id}))):k())},k=()=>{o.isShowTable=!0,o.rows=JSON.parse(JSON.stringify(c.fS))},F=()=>{o.isShowFormDialog=!0,o.formDialogTitle="新增客戶資料",o.formValues={},o.formList.forEach((e=>{e.defaultValue&&(o.formValues[e.field]=JSON.parse(JSON.stringify(e.defaultValue)))}))},V=e=>{o.isShowFormDialog=!0,o.formDialogTitle="編輯客戶資料",o.formValues={...e}},y=e=>{o.isShowConfirmDialog=!0,o.confirmDialogInfo={title:"刪除",content:"確定要刪除嗎？",confirmTxt:"確定",cancelTxt:"取消",onConfirm:()=>{o.isShowConfirmDialog=!1},onCancel:()=>{o.isShowConfirmDialog=!1}}},D=()=>{console.log("searchValue:",o.searchValue)},x=()=>{o.isShowFormDialog=!1,o.formValues={}},O=e=>{o.isShowFormDialog=!1,o.rows=o.rows.map((o=>(o.id===e.id&&(o={...e}),o))),o.formValues={}},A=()=>{const e=document.createElement("a");e.href="/files/客戶資料-匯入格式與範例.xlsx",e.download="客戶資料-匯入格式與範例.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e)},q=async e=>{console.log(e)};return(e,t)=>{const c=(0,i.g2)("q-separator"),d=(0,i.g2)("q-input"),u=(0,i.g2)("q-file"),_=(0,i.g2)("q-item-section"),L=(0,i.g2)("q-item"),T=(0,i.g2)("q-list"),I=(0,i.g2)("q-menu"),B=(0,i.g2)("q-icon"),N=(0,i.g2)("q-page"),Q=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.Wv)(N,{class:"row justify-center q-py-sm"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",f,[(0,i.Lk)("div",p,[b,(0,i.Lk)("div",g,[(0,i.bF)(s.A,{class:"q-mr-sm",modelValue:o.selectedSitesCorp,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedSitesCorp=e),options:o.sitesCorpOptions,placeholder:"請選擇公司",style:{width:"170px"},onOnUpdateEvent:t[1]||(t[1]=e=>l("sitesCorp"))},null,8,["modelValue","options"]),(0,i.bF)(s.A,{modelValue:o.selectedSitesBrand,"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedSitesBrand=e),options:o.sitesBrandOptions,placeholder:"請選擇品牌",disable:!o.haveBrand,style:{width:"170px"},onOnUpdateEvent:t[3]||(t[3]=e=>k())},null,8,["modelValue","options","disable"])])]),(0,i.bF)(c,{class:"q-mt-sm q-mb-md"}),o.isShowTable?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.Lk)("div",h,[(0,i.Lk)("div",w,[(0,i.bF)(d,{modelValue:o.searchValue,"onUpdate:modelValue":t[5]||(t[5]=e=>o.searchValue=e),class:"q-mr-sm",color:"main-blue",placeholder:"搜尋",outlined:"",dense:""},{append:(0,i.k6)((()=>[(0,i.bF)(n.A,{flat:"",round:"",dense:"","prepend-icon":{name:"mdi-magnify",color:"main-blue"},onClick:t[4]||(t[4]=e=>D())})])),_:1},8,["modelValue"]),(0,i.bF)(n.A,{class:"custom-button-round",outline:"",round:"","tooltip-txt":"新增","prepend-icon":{name:"mdi-plus",color:"main-blue"},onClick:t[6]||(t[6]=e=>F())}),(0,i.bF)(n.A,{class:"custom-button-round q-ml-sm",outline:"",round:"","tooltip-txt":"資料匯入","prepend-icon":{name:"mdi-table-arrow-up",color:"main-blue"}},{menu:(0,i.k6)((()=>[(0,i.bF)(I,{class:"custom-menu",offset:[0,10],anchor:"bottom middle",self:"top middle"},{default:(0,i.k6)((()=>[(0,i.bF)(T,null,{default:(0,i.k6)((()=>[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(L,{clickable:""},{default:(0,i.k6)((()=>[(0,i.bF)(_,null,{default:(0,i.k6)((()=>[(0,i.eW)(" 匯入 "),(0,i.bF)(u,{modelValue:o.importFile,"onUpdate:modelValue":[t[7]||(t[7]=e=>o.importFile=e),q],class:"custom-button-round--uploader",accept:".xls, .xlsx, .csv",borderless:""},null,8,["modelValue"])])),_:1})])),_:1})),[[Q]]),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(L,{clickable:"",onClick:t[8]||(t[8]=e=>A())},{default:(0,i.k6)((()=>[(0,i.bF)(_,null,{default:(0,i.k6)((()=>[(0,i.eW)("匯入格式與範例")])),_:1})])),_:1})),[[Q]])])),_:1})])),_:1})])),_:1}),(0,i.bF)(n.A,{class:"custom-button-round q-ml-sm",outline:"",round:"","tooltip-txt":"資料匯出","prepend-icon":{name:"mdi-tray-arrow-down",color:"main-blue"}})])]),(0,i.bF)(a.A,{"class-name":"custom-table-lower","table-columns":o.columns,"table-row":o.rows,"table-sets":{actionsType:["edit","delete"]},onOnEdit:V,onOnDelete:y},null,8,["table-columns","table-row"])],64)):((0,i.uX)(),(0,i.CE)("div",S,[(0,i.Lk)("div",C,[(0,i.bF)(B,{name:"mdi-table-alert",color:"neutral-grey_03",size:"170px"}),v])]))]),o.isShowFormDialog?((0,i.uX)(),(0,i.Wv)(r.A,{key:0,"is-show-dialog":o.isShowFormDialog,"is-show-action-section":!0,title:o.formDialogTitle,"form-list":o.formList,"form-values":o.formValues,onOnClose:x,onOnSave:O},null,8,["is-show-dialog","title","form-list","form-values"])):(0,i.Q3)("",!0),o.isShowConfirmDialog?((0,i.uX)(),(0,i.Wv)(m.A,{key:1,"is-show-dialog":o.isShowConfirmDialog,title:o.confirmDialogInfo.title,content:o.confirmDialogInfo.content,"confirm-txt":o.confirmDialogInfo.confirmTxt,"cancel-txt":o.confirmDialogInfo.cancelTxt,onOnCancel:o.confirmDialogInfo.onCancel,onOnConfirm:o.confirmDialogInfo.onConfirm},null,8,["is-show-dialog","title","content","confirm-txt","cancel-txt","onOnCancel","onOnConfirm"])):(0,i.Q3)("",!0)])),_:1})}}};var F=l(7716),V=l(386),y=l(7837),D=l(4436),x=l(3999),O=l(124),A=l(5173),q=l(9980),_=l(492),L=l(8672),T=l(8582),I=l.n(T);const B=k,N=B;I()(k,"components",{QPage:F.A,QSeparator:V.A,QInput:y.A,QMenu:D.A,QList:x.A,QItem:O.A,QItemSection:A.A,QFile:q.A,QIcon:_.A}),I()(k,"directives",{ClosePopup:L.A})}}]);