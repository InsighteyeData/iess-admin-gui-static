"use strict";(globalThis["webpackChunkiess_admin_gui"]=globalThis["webpackChunkiess_admin_gui"]||[]).push([[562],{6562:(e,o,l)=>{l.r(o),l.d(o,{default:()=>K});var t=l(1758),i=l(8734),s=l(9731),a=l(8790),n=l(739),r=l(2449),u=l(5949),m=l(2099);const d={class:"text-h4-bold text-neutral-grey_01"},c={key:0,class:"row justify-start items-center q-mb-md"},f={class:"custom-field-name q-pr-md"},p={key:1,class:"custom-input-div cursor-pointer row items-center justify-between"},g={key:0,class:"custom-input-div--chip"},b={key:1},V={key:1,class:"row justify-start items-center q-mb-md"},w={__name:"admin-form-dialog",props:{title:{type:String,default:()=>"",required:!0},isShowDialog:{type:Boolean,default:()=>!1,required:!0},size:{type:String,default:()=>"md"},formValues:{type:Object,default:()=>({})}},emits:{onClose:()=>!0,onSave:()=>!0},setup(e,{emit:o}){const l=e,w=o,h=(0,i.KR)(null),y=(0,i.Kh)({isShowDialog:!1,stepper:[{id:1,title:"基本設定"},{id:2,title:"權限設定"}],step:1,formValues:{},formList:[]});(0,t.sV)((async()=>{y.isShowDialog=l.isShowDialog,y.formList=JSON.parse(JSON.stringify(m.Qi)),y.formValues=l.formValues,y.formList=y.formList.map((e=>("identityCode"===e.field&&(e.options=u.pN.filter((e=>"後台"===e.system))),"permission"===e.field&&(e.options=JSON.parse(JSON.stringify(u.x2))),e)))})),(0,t.wB)((()=>l.formValues),(async e=>{y.formValues=e}));const k=(e,o)=>{let l="";if(e.options&&Array.isArray(e.options)){const t=e.options.find((e=>e.id===o));l=t?t[e.field]:""}return l};return(o,l)=>{const i=(0,t.g2)("q-card-section"),u=(0,t.g2)("q-chip"),m=(0,t.g2)("q-icon"),v=(0,t.g2)("q-popup-edit"),C=(0,t.g2)("q-form"),S=(0,t.g2)("q-step"),D=(0,t.g2)("q-stepper-navigation"),F=(0,t.g2)("q-stepper"),A=(0,t.g2)("q-card"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.Wv)(_,{modelValue:y.isShowDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>y.isShowDialog=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(A,{class:(0,a.C4)(["q-px-lg q-py-none",`custom-dialog-${e.size}`])},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"custom-dialog-title bg-neutral-white q-px-none q-pt-lg q-pb-md",align:"center"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",d,(0,a.v_)(e.title),1),(0,t.bF)(r.A,{class:"custom-dialog-close",flat:"",round:"","prepend-icon":{name:"mdi-close",color:"main-blue"},onClick:l[0]||(l[0]=e=>w("onClose"))})])),_:1}),(0,t.bF)(F,{modelValue:y.step,"onUpdate:modelValue":l[3]||(l[3]=e=>y.step=e),ref:"stepper",class:"custom-stepper",animated:""},{navigation:(0,t.k6)((()=>[(0,t.bF)(D,{class:"custom-button-group custom-dialog-actions bg-neutral-white"},{default:(0,t.k6)((()=>[(0,t.bF)(r.A,{class:"custom-button",label:"確認",onClick:l[1]||(l[1]=e=>w("onSave",y.formValues))}),(0,t.bF)(r.A,{class:"custom-button",label:y.step>1?"上一步":"下一步",outline:"",onClick:l[2]||(l[2]=e=>y.step>1?o.$refs.stepper.previous():o.$refs.stepper.next())},null,8,["label"])])),_:1})])),default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(y.stepper,(e=>((0,t.uX)(),(0,t.Wv)(S,{key:e.id,name:e.id,title:e.title,prefix:e.id,color:"neutral-grey_03","active-color":"main-blue"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{ref_for:!0,ref_key:"formRef",ref:h,class:"custom-dialog-form"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(y.formList,(e=>((0,t.uX)(),(0,t.CE)(t.FK,{key:e.field},["permission"!==e.field&&1===y.step?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("div",f,[(0,t.Lk)("span",null,(0,a.v_)(e.label),1)]),["text","password"].includes(e.type)?((0,t.uX)(),(0,t.Wv)(n.A,{key:0,modelValue:y.formValues[e.field],"onUpdate:modelValue":o=>y.formValues[e.field]=o,meta:{type:e.type,isPwd:e.isPwd}},null,8,["modelValue","onUpdate:modelValue","meta"])):"popup-table"===e.type?((0,t.uX)(),(0,t.CE)("div",p,[y.formValues[e.field]&&Array.isArray(y.formValues[e.field])&&y.formValues[e.field].length?((0,t.uX)(),(0,t.CE)("div",g,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(y.formValues[e.field],(o=>((0,t.uX)(),(0,t.Wv)(u,{key:o.id,dense:"",color:"secondary-brown","text-color":"white"},{default:(0,t.k6)((()=>[(0,t.eW)((0,a.v_)(k(e,o)),1)])),_:2},1024)))),128))])):((0,t.uX)(),(0,t.CE)("div",b," ")),(0,t.bF)(m,{class:"custom-input-div--icon",name:"mdi-chevron-down",size:"xs"}),(0,t.bF)(v,{modelValue:y.formValues[e.field],"onUpdate:modelValue":o=>y.formValues[e.field]=o,"auto-save":""},{default:(0,t.k6)((()=>[(0,t.bF)(s.A,{"table-columns":e.columns,"table-row":e.options,"table-sets":{selectionMode:"single"},selectedModelValue:y.formValues[e.field],"onUpdate:selectedModelValue":o=>y.formValues[e.field]=o},null,8,["table-columns","table-row","selectedModelValue","onUpdate:selectedModelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])):(0,t.Q3)("",!0)])):"permission"===e.field&&2===y.step?((0,t.uX)(),(0,t.CE)("div",V,[(0,t.bF)(s.A,{class:"full-width","table-columns":e.columns,"table-row":e.options,"table-sets":{selectionMode:"multiple"},selectedModelValue:y.formValues[e.field],"onUpdate:selectedModelValue":o=>y.formValues[e.field]=o},null,8,["table-columns","table-row","selectedModelValue","onUpdate:selectedModelValue"])])):(0,t.Q3)("",!0)],64)))),128))])),_:2},1536)])),_:2},1032,["name","title","prefix"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["class"])])),_:1},8,["modelValue"])}}};var h=l(2156),y=l(3316),k=l(4189),v=l(7222),C=l(8577),S=l(9200),D=l(6760),F=l(492),A=l(3486),_=l(4776),q=l(8582),x=l.n(q);const O=w,Q=O;x()(w,"components",{QDialog:h.A,QCard:y.A,QCardSection:k.A,QStepper:v.A,QStep:C.A,QForm:S.A,QChip:D.A,QIcon:F.A,QPopupEdit:A.A,QStepperNavigation:_.A});var X=l(2521),I=l(897);const L={class:"col-12 col-sm-11"},E={class:"row justify-between items-center q-mb-md"},N=(0,t.Lk)("div",{class:"text-h3"},"後台管理者",-1),T={class:"row"},U={__name:"admin",setup(e){const o=(0,i.Kh)({isShowFormDialog:!1,formDialogTitle:"",formValues:{},isShowConfirmDialog:!1,confirmDialogInfo:{},searchValue:"",columns:[{name:"actions",align:"center",label:"操作"}],rows:[]});(0,t.sV)((()=>{o.columns=[...o.columns,...I.bY],o.rows=JSON.parse(JSON.stringify(u.iA)),o.columns=o.columns.map((e=>("identityCode"===e.name&&(e.options=JSON.parse(JSON.stringify(u.pN))),e)))}));const l=()=>{o.isShowFormDialog=!0,o.formDialogTitle="新增管理者"},a=e=>{o.isShowFormDialog=!0,o.formDialogTitle="編輯管理者",o.formValues={...e}},n=e=>{o.isShowConfirmDialog=!0,o.confirmDialogInfo={title:"刪除",content:"確定要刪除嗎？",confirmTxt:"確定",cancelTxt:"取消",onConfirm:()=>{o.isShowConfirmDialog=!1},onCancel:()=>{o.isShowConfirmDialog=!1}}},m=()=>{o.isShowFormDialog=!1,o.formValues={}},d=()=>{console.log("searchValue:",o.searchValue)},c=e=>{o.isShowFormDialog=!1,o.rows=o.rows.map((o=>(o.id===e.id&&(o={...e}),o))),o.formValues={}};return(e,i)=>{const u=(0,t.g2)("q-input"),f=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(f,{class:"row justify-center q-py-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",L,[(0,t.Lk)("div",E,[N,(0,t.Lk)("div",T,[(0,t.bF)(u,{modelValue:o.searchValue,"onUpdate:modelValue":i[1]||(i[1]=e=>o.searchValue=e),class:"q-mr-sm",color:"main-blue",placeholder:"搜尋",outlined:"",dense:""},{append:(0,t.k6)((()=>[(0,t.bF)(r.A,{flat:"",round:"",dense:"","prepend-icon":{name:"mdi-magnify",color:"main-blue"},onClick:i[0]||(i[0]=e=>d())})])),_:1},8,["modelValue"]),(0,t.bF)(r.A,{class:"custom-button-round",outline:"",round:"","tooltip-txt":"新增","prepend-icon":{name:"mdi-plus",color:"main-blue"},onClick:i[2]||(i[2]=e=>l())})])]),(0,t.bF)(s.A,{"table-columns":o.columns,"table-row":o.rows,"table-sets":{actionsType:["edit","delete"]},onOnEdit:a,onOnDelete:n},null,8,["table-columns","table-row"])]),o.isShowFormDialog?((0,t.uX)(),(0,t.Wv)(Q,{key:0,"is-show-dialog":o.isShowFormDialog,title:o.formDialogTitle,size:"lg","form-values":o.formValues,onOnClose:m,onOnSave:c},null,8,["is-show-dialog","title","form-values"])):(0,t.Q3)("",!0),o.isShowConfirmDialog?((0,t.uX)(),(0,t.Wv)(X.A,{key:1,"is-show-dialog":o.isShowConfirmDialog,title:o.confirmDialogInfo.title,content:o.confirmDialogInfo.content,"confirm-txt":o.confirmDialogInfo.confirmTxt,"cancel-txt":o.confirmDialogInfo.cancelTxt,onOnCancel:o.confirmDialogInfo.onCancel,onOnConfirm:o.confirmDialogInfo.onConfirm},null,8,["is-show-dialog","title","content","confirm-txt","cancel-txt","onOnCancel","onOnConfirm"])):(0,t.Q3)("",!0)])),_:1})}}};var M=l(7716),J=l(7837);const W=U,K=W;x()(U,"components",{QPage:M.A,QInput:J.A})}}]);