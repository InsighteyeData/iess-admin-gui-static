"use strict";(globalThis["webpackChunkiess_admin_gui"]=globalThis["webpackChunkiess_admin_gui"]||[]).push([[645],{1645:(o,e,i)=>{i.r(e),i.d(e,{default:()=>j});var t=i(1758),l=i(8734),s=i(2009),n=i(2449),a=i(9731),r=i(1658),c=i(8790),d=i(5949);const m={class:"text-h4-bold text-neutral-grey_01"},u={__name:"sites-group-dialog",props:{isShowDialog:{type:Boolean,default:!1},rowInfo:{type:Object,default:()=>({})}},emits:{onClose:()=>!0,onSave:()=>!0},setup(o,{emit:e}){const i=o,s=e,a=(0,l.Kh)({isShowDialog:!1,sitesAdminId:null,corpId:null,ticked:[],expanded:[],groups:[]});(0,t.sV)((()=>{a.isShowDialog=i.isShowDialog,a.sitesAdminId=i.rowInfo.id,a.corpId=i.rowInfo.corp,r()}));const r=()=>{const o=d.Z9.find((o=>o.id===a.corpId)).haveBrand;a.groups=o?d.gd.filter((o=>o.corp===a.corpId)).map((o=>({id:o.id,label:o.bname,children:d.fS.filter((e=>e.brand===o.id)).map((o=>({id:o.id,label:o.sitesName})))}))):d.fS.filter((o=>o.corp===a.corpId)).map((o=>({id:o.id,label:o.sitesName})))},u=()=>{s("onClose")},p=()=>{s("onSave",a.ticked)};return(o,e)=>{const l=(0,t.g2)("q-card-section"),s=(0,t.g2)("q-tree"),r=(0,t.g2)("q-card-actions"),d=(0,t.g2)("q-card"),g=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:a.isShowDialog,"onUpdate:modelValue":e[4]||(e[4]=o=>a.isShowDialog=o),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"custom-dialog-sm q-px-lg q-pb-lg"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{class:"custom-dialog-title bg-neutral-white q-px-none q-pt-lg q-pb-md",align:"center"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",m,(0,c.v_)(i.rowInfo.title),1)])),_:1}),(0,t.bF)(l,{class:"custom-dialog-main q-px-none q-pt-none scroll",style:{"max-height":"400px"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"col-12 col-sm-6",nodes:a.groups,"node-key":"id","tick-strategy":"leaf",ticked:a.ticked,"onUpdate:ticked":e[0]||(e[0]=o=>a.ticked=o),expanded:a.expanded,"onUpdate:expanded":e[1]||(e[1]=o=>a.expanded=o),color:"main-blue"},null,8,["nodes","ticked","expanded"])])),_:1}),(0,t.bF)(r,{class:"custom-button-group custom-dialog-actions bg-neutral-white",align:"center"},{default:(0,t.k6)((()=>[(0,t.bF)(n.A,{class:"custom-button",label:"取消",outline:"",onClick:e[2]||(e[2]=o=>u())}),(0,t.bF)(n.A,{class:"custom-button",label:"確認",onClick:e[3]||(e[3]=o=>p())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var p=i(2156),g=i(3316),f=i(4189),w=i(2220),h=i(2669),b=i(8582),S=i.n(b);const D=u,C=D;S()(u,"components",{QDialog:p.A,QCard:g.A,QCardSection:f.A,QTree:w.A,QCardActions:h.A});var k=i(2521),v=i(2099),x=i(897);const y={class:"col-12 col-sm-11"},I={class:"row justify-between items-center"},F=(0,t.Lk)("div",{class:"text-h3"},"前台管理者",-1),q={class:"row q-mb-md justify-end items-center"},A={class:"row"},O={key:1,class:"custom-no-data row justify-center items-center"},V={class:"row justify-center"},_=(0,t.Lk)("div",{class:"col-12 text-h4 text-center text-neutral-grey_02"},"請先選擇公司",-1),L={__name:"sites-admin",setup(o){const e=(0,l.Kh)({sitesCorpOptions:[],selectedSitesCorp:null,searchValue:"",isShowFormDialog:!1,formDialogTitle:"",formValues:{},isShowSitesGroupDialog:!1,sitesGroupDialogRowInfo:{},isShowConfirmDialog:!1,confirmDialogInfo:{},formList:[],columns:[{name:"actions",align:"center",label:"操作"}],rows:[]});(0,t.sV)((()=>{e.sitesCorpOptions=d.Z9.map((o=>({label:o.corpName,value:o.id}))),e.formList=JSON.parse(JSON.stringify(v.ew)),e.columns=[...e.columns,...x.Ld],e.columns=e.columns.map((o=>("identityCode"===o.name&&(o.options=d.pN.filter((o=>"前台"===o.system))),o))),e.formList=e.formList.map((o=>("identityCode"===o.field&&(o.options=d.pN.filter((o=>"前台"===o.system))),"monthLimit"===o.field&&(o.options=JSON.parse(JSON.stringify(d.IF))),o)))}));const i=()=>{e.rows=d.kY.filter((o=>o.corp===e.selectedSitesCorp))},c=()=>{e.isShowFormDialog=!0,e.formDialogTitle="新增管理者"},m=o=>{e.isShowFormDialog=!0,e.formDialogTitle="編輯管理者",e.formValues={...o}},u=o=>{e.isShowConfirmDialog=!0,e.confirmDialogInfo={title:"刪除",content:"確定要刪除嗎？",confirmTxt:"確定",cancelTxt:"取消",onConfirm:()=>{e.isShowConfirmDialog=!1},onCancel:()=>{e.isShowConfirmDialog=!1}}},p=()=>{console.log("searchValue:",e.searchValue)},g=()=>{e.isShowFormDialog=!1,e.formValues={}},f=o=>{e.isShowFormDialog=!1,e.rows=e.rows.map((e=>(e.id===o.id&&(e={...o}),e))),e.formValues={}},w=(o,i)=>{"sitesGroup"===o&&(e.sitesGroupDialogRowInfo={...i,title:i.sitesAdminName},e.isShowSitesGroupDialog=!0)},h=o=>{e.isShowSitesGroupDialog=!1};return(o,l)=>{const d=(0,t.g2)("q-separator"),b=(0,t.g2)("q-input"),S=(0,t.g2)("q-icon"),D=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(D,{class:"row justify-center q-py-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",y,[(0,t.Lk)("div",I,[F,(0,t.bF)(s.A,{modelValue:e.selectedSitesCorp,"onUpdate:modelValue":l[0]||(l[0]=o=>e.selectedSitesCorp=o),options:e.sitesCorpOptions,placeholder:"請選擇公司",style:{width:"170px"},onOnUpdateEvent:l[1]||(l[1]=o=>i())},null,8,["modelValue","options"])]),(0,t.bF)(d,{class:"q-mt-sm q-mb-md"}),e.selectedSitesCorp?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",q,[(0,t.Lk)("div",A,[(0,t.bF)(b,{modelValue:e.searchValue,"onUpdate:modelValue":l[3]||(l[3]=o=>e.searchValue=o),class:"q-mr-sm",color:"main-blue",placeholder:"搜尋",outlined:"",dense:""},{append:(0,t.k6)((()=>[(0,t.bF)(n.A,{flat:"",round:"",dense:"","prepend-icon":{name:"mdi-magnify",color:"main-blue"},onClick:l[2]||(l[2]=o=>p())})])),_:1},8,["modelValue"]),(0,t.bF)(n.A,{class:"custom-button-round",outline:"",round:"","tooltip-txt":"新增","prepend-icon":{name:"mdi-plus",color:"main-blue"},onClick:l[4]||(l[4]=o=>c())})])]),(0,t.bF)(a.A,{"class-name":"custom-table-lower","table-columns":e.columns,"table-row":e.rows,"table-sets":{actionsType:["edit","delete"]},onOnEdit:m,onOnDelete:u,onOnOtherSetting:w},null,8,["table-columns","table-row"])],64)):((0,t.uX)(),(0,t.CE)("div",O,[(0,t.Lk)("div",V,[(0,t.bF)(S,{name:"mdi-table-alert",color:"neutral-grey_03",size:"170px"}),_])]))]),e.isShowFormDialog?((0,t.uX)(),(0,t.Wv)(r.A,{key:0,"is-show-dialog":e.isShowFormDialog,"is-show-action-section":!0,title:e.formDialogTitle,"form-list":e.formList,"form-values":e.formValues,onOnClose:g,onOnSave:f},null,8,["is-show-dialog","title","form-list","form-values"])):(0,t.Q3)("",!0),e.isShowSitesGroupDialog?((0,t.uX)(),(0,t.Wv)(C,{key:1,"is-show-dialog":e.isShowSitesGroupDialog,"row-info":e.sitesGroupDialogRowInfo,onOnClose:l[5]||(l[5]=o=>{e.isShowSitesGroupDialog=!1}),onOnSave:h},null,8,["is-show-dialog","row-info"])):(0,t.Q3)("",!0),e.isShowConfirmDialog?((0,t.uX)(),(0,t.Wv)(k.A,{key:2,"is-show-dialog":e.isShowConfirmDialog,title:e.confirmDialogInfo.title,content:e.confirmDialogInfo.content,"confirm-txt":e.confirmDialogInfo.confirmTxt,"cancel-txt":e.confirmDialogInfo.cancelTxt,onOnCancel:e.confirmDialogInfo.onCancel,onOnConfirm:e.confirmDialogInfo.onConfirm},null,8,["is-show-dialog","title","content","confirm-txt","cancel-txt","onOnCancel","onOnConfirm"])):(0,t.Q3)("",!0)])),_:1})}}};var Q=i(7716),T=i(386),G=i(7837),N=i(492);const X=L,j=X;S()(L,"components",{QPage:Q.A,QSeparator:T.A,QInput:G.A,QIcon:N.A})}}]);