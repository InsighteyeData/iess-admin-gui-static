"use strict";(globalThis["webpackChunkiess_admin_gui"]=globalThis["webpackChunkiess_admin_gui"]||[]).push([[950],{1950:(e,o,s)=>{s.r(o),s.d(o,{default:()=>A});s(239);var i=s(1758),l=s(8734),t=s(455),n=s(2009),a=s(2449),r=s(9731),c=s(1658),m=s(2521),d=s(8098),p=s(3536),u=s(5949);const f={class:"col-12 col-sm-11"},g={class:"row justify-between items-center"},h=(0,i.Lk)("div",{class:"text-h3"},"設備資料",-1),S={class:"row"},w={class:"row q-mb-md justify-end items-center"},b={class:"row"},v={key:1,class:"custom-no-data row justify-center items-center"},C={class:"row justify-center"},O=(0,i.Lk)("div",{class:"col-12 text-h4 text-center text-neutral-grey_02"},"請先選擇公司、品牌、門市/分行",-1),D={__name:"index",setup(e){const o=(0,t.rd)(),s=(0,l.Kh)({sitesCorpOptions:[],selectedSitesCorp:null,sitesBrandOptions:[],selectedSitesBrand:null,sitesOptions:[],selectedSites:null,haveBrand:!1,title:"",searchValue:"",isShowConfirmDialog:!1,confirmDialogInfo:{},isShowFormDialog:!1,formDialogTitle:"",formList:[],formValues:{},columns:[{name:"actions",align:"center",label:"操作"}],rows:[]});(0,i.sV)((()=>{s.sitesCorpOptions=u.Z9.map((e=>({label:e.corpName,value:e.id}))),s.columns=[...s.columns,...d.E8],s.columns=s.columns.map((e=>("coefId"===e.name&&(e.options=D()),"typeId"===e.name&&(e.options=JSON.parse(JSON.stringify(u.t5))),"deviceName"===e.name&&(e.options=JSON.parse(JSON.stringify(u.YP))),e))),s.formList=p.xM.map((e=>("coefId"===e.field&&(e.options=D()),"typeId"===e.field&&(e.options=JSON.parse(JSON.stringify(u.t5))),"deviceName"===e.field&&(e.options=JSON.parse(JSON.stringify(u.YP))),e)))}));const D=()=>u.UR.map((e=>({...e,coefId:e.name}))),y=e=>{"sitesCorp"===e&&(s.haveBrand=u.Z9.find((e=>e.id===s.selectedSitesCorp)).haveBrand,s.haveBrand?s.sitesBrandOptions=u.gd.filter((e=>e.corp===s.selectedSitesCorp)).map((e=>({label:e.bname,value:e.id}))):V())},V=()=>{s.sitesOptions=u.fS.filter((e=>s.haveBrand?e.brand===s.selectedSitesBrand:e.corp===s.selectedSitesCorp)).map((e=>({label:e.sitesName,value:e.id})))},k=()=>{s.rows=JSON.parse(JSON.stringify(u.T))},x=()=>{console.log("searchValue:",s.searchValue)},F=()=>{s.formDialogTitle="新增設備資料",s.isShowFormDialog=!0},B=e=>{s.isShowFormDialog=!0,s.formDialogTitle="編輯設備資料",s.formValues={...e}},I=()=>{s.isShowConfirmDialog=!0,s.confirmDialogInfo={title:"刪除",content:"確定要刪除嗎？",confirmTxt:"確定",cancelTxt:"取消",onConfirm:()=>{s.isShowConfirmDialog=!1},onCancel:()=>{s.isShowConfirmDialog=!1}}},A=e=>{o.push({name:"device-info-alarm",params:{id:e.id}})},N=()=>{s.isShowFormDialog=!1,s.formValues={}},T=e=>{s.isShowFormDialog=!1,s.rows=s.rows.map((o=>(o.id===e.id&&(o={...e}),o))),s.formValues={}};return(e,o)=>{const l=(0,i.g2)("q-separator"),t=(0,i.g2)("q-input"),d=(0,i.g2)("q-icon"),p=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(p,{class:"row justify-center q-py-sm custom-table-height-230"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",f,[(0,i.Lk)("div",g,[h,(0,i.Lk)("div",S,[(0,i.bF)(n.A,{class:"q-mr-sm",modelValue:s.selectedSitesCorp,"onUpdate:modelValue":o[0]||(o[0]=e=>s.selectedSitesCorp=e),options:s.sitesCorpOptions,placeholder:"請選擇公司",style:{width:"170px"},onOnUpdateEvent:o[1]||(o[1]=e=>y("sitesCorp"))},null,8,["modelValue","options"]),(0,i.bF)(n.A,{class:"q-mr-sm",modelValue:s.selectedSitesBrand,"onUpdate:modelValue":o[2]||(o[2]=e=>s.selectedSitesBrand=e),options:s.sitesBrandOptions,placeholder:"請選擇品牌",disable:!s.haveBrand,style:{width:"170px"},onOnUpdateEvent:o[3]||(o[3]=e=>V())},null,8,["modelValue","options","disable"]),(0,i.bF)(n.A,{modelValue:s.selectedSites,"onUpdate:modelValue":o[4]||(o[4]=e=>s.selectedSites=e),options:s.sitesOptions,placeholder:"請選擇門市/分行",disable:s.haveBrand&&!s.selectedSitesBrand||!s.selectedSitesCorp,style:{width:"170px"},onOnUpdateEvent:o[5]||(o[5]=e=>k())},null,8,["modelValue","options","disable"])])]),(0,i.bF)(l,{class:"q-mt-sm q-mb-md"}),s.selectedSites?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.Lk)("div",w,[(0,i.Lk)("div",b,[(0,i.bF)(t,{modelValue:s.searchValue,"onUpdate:modelValue":o[7]||(o[7]=e=>s.searchValue=e),class:"q-mr-sm",color:"main-blue",placeholder:"搜尋",outlined:"",dense:""},{append:(0,i.k6)((()=>[(0,i.bF)(a.A,{flat:"",round:"",dense:"","prepend-icon":{name:"mdi-magnify",color:"main-blue"},onClick:o[6]||(o[6]=e=>x())})])),_:1},8,["modelValue"]),(0,i.bF)(a.A,{class:"custom-button-round",outline:"",round:"","tooltip-txt":"新增","prepend-icon":{name:"mdi-plus",color:"main-blue"},onClick:o[8]||(o[8]=e=>F())})])]),(0,i.bF)(r.A,{"class-name":"custom-table-lower","table-columns":s.columns,"table-row":s.rows,"table-sets":{actionsType:["edit","delete","settingAlarm"]},onOnDelete:I,onOnEdit:B,onOnSettingAlarm:A},null,8,["table-columns","table-row"])],64)):((0,i.uX)(),(0,i.CE)("div",v,[(0,i.Lk)("div",C,[(0,i.bF)(d,{name:"mdi-table-alert",color:"neutral-grey_03",size:"170px"}),O])]))]),s.isShowFormDialog?((0,i.uX)(),(0,i.Wv)(c.A,{key:0,"is-show-dialog":s.isShowFormDialog,"is-show-action-section":!0,title:s.formDialogTitle,"form-list":s.formList,"form-values":s.formValues,onOnClose:N,onOnSave:T},null,8,["is-show-dialog","title","form-list","form-values"])):(0,i.Q3)("",!0),s.isShowConfirmDialog?((0,i.uX)(),(0,i.Wv)(m.A,{key:1,"is-show-dialog":s.isShowConfirmDialog,title:s.confirmDialogInfo.title,content:s.confirmDialogInfo.content,"confirm-txt":s.confirmDialogInfo.confirmTxt,"cancel-txt":s.confirmDialogInfo.cancelTxt,onOnCancel:s.confirmDialogInfo.onCancel,onOnConfirm:s.confirmDialogInfo.onConfirm},null,8,["is-show-dialog","title","content","confirm-txt","cancel-txt","onOnCancel","onOnConfirm"])):(0,i.Q3)("",!0)])),_:1})}}};var y=s(7716),V=s(386),k=s(7837),x=s(492),F=s(8582),B=s.n(F);const I=D,A=I;B()(D,"components",{QPage:y.A,QSeparator:V.A,QInput:k.A,QIcon:x.A})}}]);