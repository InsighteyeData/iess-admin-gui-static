"use strict";(globalThis["webpackChunkiess_admin_gui"]=globalThis["webpackChunkiess_admin_gui"]||[]).push([[171],{5171:(e,o,l)=>{l.r(o),l.d(o,{default:()=>O});var n=l(1758),t=l(8790),s=l(8734),a=l(455),c=l(2449),i=l(9731),m=l(739),u=l(2009),d=l(4137),r=l(8090),p=l(5949),b=l(8098);const y={class:"col-12 col-sm-11"},w={class:"row justify-between items-center q-mb-md"},f={class:"row items-center"},v=(0,n.Lk)("div",{class:"text-h3"},"設定警報",-1),g={class:"row q-mb-md items-center"},k=(0,n.Lk)("div",{class:"text-h5 q-ml-sm"},"設備資料",-1),V={class:"row q-mt-lg q-mb-md items-center justify-between"},h={class:"flex"},x=(0,n.Lk)("div",{class:"text-h5 q-ml-sm"},"設定",-1),C={class:"flex"},A={key:5,class:"custom-input-div row items-center justify-between",style:{width:"150px"}},q={key:0},T={key:1},F={key:6},I={__name:"alarm-setting",setup(e){const o=(0,a.lq)(),l=(0,a.rd)(),I=(0,s.Kh)({focusedDeviceColumns:[],focusedDeviceInfo:[],settingColumns:[{name:"actions",field:"actions",align:"center",label:"操作"}],settingRows:[]});(0,n.sV)((()=>{I.focusedDeviceInfo=p.T.filter((e=>e.id.toString()===o.params.id)),I.focusedDeviceColumns=b.E8.map((e=>("coefId"===e.name&&(e.options=p.UR.map((e=>({...e,coefId:e.name})))),"typeId"===e.name&&(e.options=JSON.parse(JSON.stringify(p.t5))),"deviceName"===e.name&&(e.options=JSON.parse(JSON.stringify(p.YP))),e.sortable=!1,e))),I.settingRows=JSON.parse(JSON.stringify(p.yu)),I.settingColumns=[...I.settingColumns,...b.DI],I.settingColumns.forEach((e=>{if("alarmName"===e.name){const o=I.focusedDeviceInfo.map((e=>e.typeId))[0],l=p.t5.find((e=>o.includes(e.id)));l&&(e.options=p.yx.filter((e=>e.typeId.includes(l.id)))),e.columns.forEach((e=>{"typeId"===e.name&&(e.options=JSON.parse(JSON.stringify(p.t5)))}))}"alarmNotify"===e.name&&(e.options=p.kY.map((e=>({label:e.account,value:e.id}))))}))}));const U=()=>{l.go(-1)},X=(e,o)=>{let l="";if(e.options&&Array.isArray(e.options)){const n=e.options.find((e=>e.id===o));l=n?n[e.field]:""}return l},_=()=>{const e={id:(0,r.A)()};I.settingColumns.forEach((o=>{"checkbox"===o.columnType?e[o.name]=!1:e[o.name]=null})),I.settingRows.unshift(e)};return(e,o)=>{const l=(0,n.g2)("q-icon"),s=(0,n.g2)("q-checkbox"),a=(0,n.g2)("q-popup-edit"),r=(0,n.g2)("q-td"),p=(0,n.g2)("q-table"),b=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(b,{class:"row justify-center q-py-sm"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",y,[(0,n.Lk)("div",w,[(0,n.Lk)("div",f,[(0,n.bF)(c.A,{class:"q-mr-xs",flat:"",round:"","tooltip-txt":"返回","prepend-icon":{name:"mdi-arrow-left",color:"main-blue"},onClick:o[0]||(o[0]=e=>U())}),v])]),(0,n.Lk)("div",g,[(0,n.bF)(l,{name:"mdi-file-document-outline",color:"main-orange",size:"md"}),k]),(0,n.bF)(i.A,{class:(0,t.C4)("custom-table-view-only"),"table-columns":I.focusedDeviceColumns,"table-row":I.focusedDeviceInfo},null,8,["table-columns","table-row"]),(0,n.Lk)("div",V,[(0,n.Lk)("div",h,[(0,n.bF)(l,{name:"mdi-cog-outline",color:"main-orange",size:"md"}),x]),(0,n.Lk)("div",C,[(0,n.bF)(c.A,{class:"custom-button-round q-mr-sm",outline:"",round:"","tooltip-txt":"新增","prepend-icon":{name:"mdi-plus",color:"main-blue"},onClick:o[1]||(o[1]=e=>_())}),(0,n.bF)(c.A,{class:"q-mr-xs",label:"儲存",outline:""})])]),(0,n.bF)(p,{class:"custom-table",columns:I.settingColumns,rows:I.settingRows,"row-key":"id","hide-bottom":"",bordered:"",dense:""},{"body-cell":(0,n.k6)((e=>[(0,n.bF)(r,{props:e},{default:(0,n.k6)((()=>["actions"===e.col.name?((0,n.uX)(),(0,n.Wv)(c.A,{key:0,class:"custom-button-text",color:"error",label:"刪除",flat:""})):"checkbox"===e.col.columnType?((0,n.uX)(),(0,n.Wv)(s,{key:1,modelValue:e.row[e.col.name],"onUpdate:modelValue":o=>e.row[e.col.name]=o,color:"main-blue",dense:""},null,8,["modelValue","onUpdate:modelValue"])):["text","number"].includes(e.col.columnType)?((0,n.uX)(),(0,n.Wv)(m.A,{key:2,modelValue:e.row[e.col.name],"onUpdate:modelValue":o=>e.row[e.col.name]=o,meta:{type:e.col.columnType},style:(0,t.Tr)({width:"number"===e.col.columnType?"100px":"200px"})},null,8,["modelValue","onUpdate:modelValue","meta","style"])):"time"===e.col.columnType?((0,n.uX)(),(0,n.Wv)(d.A,{key:3,modelValue:e.row[e.col.name],"onUpdate:modelValue":o=>e.row[e.col.name]=o,meta:{type:e.col.columnType},style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue","meta"])):"select"===e.col.columnType?((0,n.uX)(),(0,n.Wv)(u.A,{key:4,modelValue:e.row[e.col.name],"onUpdate:modelValue":o=>e.row[e.col.name]=o,options:e.col.options,style:{width:"170px"}},null,8,["modelValue","onUpdate:modelValue","options"])):"popup-table"===e.col.columnType?((0,n.uX)(),(0,n.CE)("div",A,[e.row[e.col.name]&&Array.isArray(e.row[e.col.name])&&e.row[e.col.name].length?((0,n.uX)(),(0,n.CE)("div",q,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.row[e.col.name],(o=>((0,n.uX)(),(0,n.CE)(n.FK,{key:o.id},[(0,n.eW)((0,t.v_)(X(e.col,o)),1)],64)))),128))])):((0,n.uX)(),(0,n.CE)("div",T," ")),(0,n.bF)(l,{class:"custom-input-div--icon",name:"mdi-chevron-down",size:"xs"}),(0,n.bF)(a,{modelValue:e.row[e.col.name],"onUpdate:modelValue":o=>e.row[e.col.name]=o,"auto-save":""},{default:(0,n.k6)((()=>[(0,n.bF)(i.A,{"table-columns":e.col.columns,"table-row":e.col.options,"table-sets":{selectionMode:"single"},selectedModelValue:e.row[e.col.name],"onUpdate:selectedModelValue":o=>e.row[e.col.name]=o},null,8,["table-columns","table-row","selectedModelValue","onUpdate:selectedModelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])):((0,n.uX)(),(0,n.CE)("div",F,(0,t.v_)(e.row[e.col.name]),1))])),_:2},1032,["props"])])),_:1},8,["columns","rows"])])])),_:1})}}};var U=l(7716),X=l(492),_=l(6653),E=l(5262),N=l(7022),L=l(3486),S=l(8582),D=l.n(S);const J=I,O=J;D()(I,"components",{QPage:U.A,QIcon:X.A,QTable:_.A,QTd:E.A,QCheckbox:N.A,QPopupEdit:L.A})}}]);